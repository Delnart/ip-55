<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å—å–∫–∏–π –ø–æ–º—ñ—á–Ω–∏–∫</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow-x: hidden;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const API_BASE = '/api'; // –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–π —à–ª—è—Ö
        
        const Icons = {
            Home: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            Calendar: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>,
            Users: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
            Book: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>,
            Clipboard: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
        };
        
        function App() {
            const [tab, setTab] = useState('home');
            const [user, setUser] = useState(null);
            const [subjects, setSubjects] = useState([]);
            
            // –Ø–í–ù–ê –ú–ê–ü–ê –Ü–ö–û–ù–û–ö (–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏)
            const tabIcons = {
                home: Icons.Home,
                schedule: Icons.Calendar,
                queues: Icons.Users,
                topics: Icons.Book,
                homework: Icons.Clipboard
            };
            
            useEffect(() => {
                const tg = window.Telegram?.WebApp;
                if (tg) {
                    tg.ready();
                    tg.expand();
                    const u = tg.initDataUnsafe.user;
                    if (u) {
                        setUser({
                            id: u.id,
                            firstName: u.first_name,
                            lastName: u.last_name,
                            username: u.username
                        });
                    }
                }
                
                const params = new URLSearchParams(window.location.search);
                const t = params.get('tab');
                if (t) setTab(t);
                
                fetch(`${API_BASE}/subjects`)
                    .then(r => r.json())
                    .then(d => setSubjects(d))
                    .catch(console.error);
            }, []);
            
            return (
                <div className="min-h-screen bg-gray-50 pb-20">
                    {tab === 'home' && <Home user={user} subjects={subjects} setTab={setTab} />}
                    {tab === 'schedule' && <Schedule />}
                    {tab === 'queues' && <Queues user={user} subjects={subjects} />}
                    {tab === 'topics' && <Topics user={user} subjects={subjects} />}
                    {tab === 'homework' && <Homework user={user} />}
                    
                    <nav className="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-50">
                        <div className="flex justify-around h-16">
                            {['home', 'schedule', 'queues', 'topics', 'homework'].map(t => {
                                const IconComponent = tabIcons[t];
                                return (
                                    <button key={t} onClick={() => setTab(t)} className={`flex flex-col items-center justify-center flex-1 ${tab === t ? 'text-blue-600' : 'text-gray-500'}`}>
                                        <IconComponent />
                                        <span className="text-xs mt-1">{t === 'home' ? '–ì–æ–ª–æ–≤–Ω–∞' : t === 'schedule' ? '–†–æ–∑–∫–ª–∞–¥' : t === 'queues' ? '–ß–µ—Ä–≥–∏' : t === 'topics' ? '–¢–µ–º–∏' : '–î–æ–º–∞—à–∫–∞'}</span>
                                    </button>
                                );
                            })}
                        </div>
                    </nav>
                </div>
            );
        }
        
        function Home({ user, subjects, setTab }) {
            return (
                <div className="p-4">
                    <h1 className="text-2xl font-bold mb-4">–ü—Ä–∏–≤—ñ—Ç, {user?.firstName || '–°—Ç—É–¥–µ–Ω—Ç'}!</h1>
                    <div className="bg-white rounded-xl shadow-sm p-4 mb-4">
                        <h2 className="font-bold text-lg mb-3">–®–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø</h2>
                        <div className="grid grid-cols-2 gap-3">
                            {[
                                { key: 'queues', label: '–ß–µ—Ä–≥–∏', color: 'blue', Icon: Icons.Users },
                                { key: 'topics', label: '–¢–µ–º–∏', color: 'green', Icon: Icons.Book },
                                { key: 'schedule', label: '–†–æ–∑–∫–ª–∞–¥', color: 'purple', Icon: Icons.Calendar },
                                { key: 'homework', label: '–î–æ–º–∞—à–∫–∞', color: 'orange', Icon: Icons.Clipboard }
                            ].map(({ key, label, color, Icon }) => (
                                <button key={key} onClick={() => setTab(key)} className={`bg-${color}-50 p-4 rounded-lg text-center hover:bg-${color}-100 transition`}>
                                    <Icon />
                                    <p className="text-sm font-medium mt-2">{label}</p>
                                </button>
                            ))}
                        </div>
                    </div>
                    
                    {subjects.length > 0 && (
                        <div className="bg-white rounded-xl shadow-sm p-4">
                            <h2 className="font-bold text-lg mb-3">–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</h2>
                            {subjects.map(s => (
                                <div key={s._id} className="border-b last:border-0 py-3">
                                    <p className="font-medium">{s.name}</p>
                                    <p className="text-sm text-gray-500">{s.type}</p>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }
        
        function Schedule() {
            const [schedule, setSchedule] = useState(null);
            const [week, setWeek] = useState(1);
            const [day, setDay] = useState(null);
            
            useEffect(() => {
                fetch(`${API_BASE}/schedule`) // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ API_BASE –∞–±–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î —Ç–∞–∫–∏–π –µ–Ω–¥–ø–æ—ñ–Ω—Ç –Ω–∞ –≤–∞—à–æ–º—É –±–µ–∫–µ–Ω–¥—ñ, –∞–±–æ –∑–∞–ª–∏—à–∞—î–º–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π URL —è–∫—â–æ —Ç—Ä–µ–±–∞
                    .then(r => r.json()) 
                    .then(d => setSchedule(d))
                    .catch(() => {
                         // Fallback —è–∫—â–æ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∞ –Ω–µ–º–∞, —Å–ø—Ä–æ–±—É—î–º–æ –ø—Ä—è–º–∏–π –∑–∞–ø–∏—Ç –¥–æ KPI (—á–µ—Ä–µ–∑ –±–µ–∫–µ–Ω–¥ –ø—Ä–æ–∫—Å—ñ –∫—Ä–∞—â–µ)
                         // –ê–±–æ, —è–∫—â–æ —É –≤–∞—Å –≤ main.py –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π schedule —Ä–æ—É—Ç–µ—Ä, —Ç–æ –∫—Ä–∞—â–µ –∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—å —Ç—É–¥–∏
                         // –í –æ—Ä–∏–≥—ñ–Ω–∞–ª—ñ —Ç—É—Ç –±—É–≤ –∑–∞–ø–∏—Ç –Ω–∞ 'https://api.campus.kpi.ua...', —Ü–µ –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ CORS –ø–æ–º–∏–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä—ñ.
                         // –ö—Ä–∞—â–µ –∑—Ä–æ–±–∏—Ç–∏ –µ–Ω–¥–ø–æ—ñ–Ω—Ç –≤ –≤–∞—à–æ–º—É main.py —è–∫–∏–π –ø—Ä–æ–∫—Å—É—î —Ü–µ–π –∑–∞–ø–∏—Ç.
                         console.log("Schedule fetch error");
                    });
            }, []);
            
            // –¢–∏–º—á–∞—Å–æ–≤–∞ –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ä–æ–∑–∫–ª–∞–¥—É, –ø–æ–∫–∏ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –±–µ–∫–µ–Ω–¥ –ø—Ä–æ–∫—Å—ñ
            if (!schedule) return (
                <div className="p-4 text-center">
                    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É...</p>
                    <button onClick={() => window.open('https://rozklad.kpi.ua/', '_blank')} className="mt-4 text-blue-600 underline">–í—ñ–¥–∫—Ä–∏—Ç–∏ rozklad.kpi.ua</button>
                </div>
            );
            
            const weekKey = week === 1 ? 'scheduleFirstWeek' : 'scheduleSecondWeek';
            const weekSch = schedule[weekKey] || [];
            const days = [
                { code: '–ü–Ω', name: '–ü–æ–Ω–µ–¥—ñ–ª–æ–∫' },
                { code: '–í–≤', name: '–í—ñ–≤—Ç–æ—Ä–æ–∫' },
                { code: '–°—Ä', name: '–°–µ—Ä–µ–¥–∞' },
                { code: '–ß—Ç', name: '–ß–µ—Ç–≤–µ—Ä' },
                { code: '–ü—Ç', name: "–ü'—è—Ç–Ω–∏—Ü—è" }
            ];
            
            if (day) {
                const dayData = weekSch.find(d => d.day === day);
                return (
                    <div className="min-h-screen bg-gray-50">
                        <div className="bg-white p-4 shadow-sm sticky top-0">
                            <button onClick={() => setDay(null)} className="text-blue-600 mb-2">‚Üê –ù–∞–∑–∞–¥</button>
                            <h1 className="font-bold text-xl">{days.find(d => d.code === day)?.name}</h1>
                        </div>
                        <div className="p-4 space-y-3">
                            {dayData?.pairs?.map((p, i) => (
                                <div key={i} className="bg-white rounded-xl shadow-sm p-4 border-l-4 border-blue-500">
                                    <div className="flex justify-between mb-2">
                                        <h3 className="font-bold">{p.name}</h3>
                                        <span className="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">{p.time}</span>
                                    </div>
                                    <p className="text-sm text-gray-600">{p.teacherName}</p>
                                    <p className="text-xs text-gray-500">{p.place}</p>
                                </div>
                            )) || <p className="text-center text-gray-400">–í–∏—Ö—ñ–¥–Ω–∏–π</p>}
                        </div>
                    </div>
                );
            }
            
            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="bg-white p-4 shadow-sm sticky top-0">
                        <h1 className="font-bold text-2xl mb-3">–†–æ–∑–∫–ª–∞–¥</h1>
                        <div className="flex gap-2">
                            <button onClick={() => setWeek(1)} className={`flex-1 py-2 rounded-lg ${week === 1 ? 'bg-blue-600 text-white' : 'bg-gray-100'}`}>1 —Ç–∏–∂–¥–µ–Ω—å</button>
                            <button onClick={() => setWeek(2)} className={`flex-1 py-2 rounded-lg ${week === 2 ? 'bg-blue-600 text-white' : 'bg-gray-100'}`}>2 —Ç–∏–∂–¥–µ–Ω—å</button>
                        </div>
                    </div>
                    <div className="p-4 space-y-3">
                        {days.map(d => {
                            const dayData = weekSch.find(wd => wd.day === d.code);
                            const cnt = dayData?.pairs?.length || 0;
                            return (
                                <button key={d.code} onClick={() => setDay(d.code)} className="w-full bg-white rounded-xl shadow-sm p-4 text-left">
                                    <h3 className="font-bold text-lg">{d.name}</h3>
                                    <p className="text-sm text-gray-500">{cnt > 0 ? `${cnt} –ø–∞—Ä` : '–í–∏—Ö—ñ–¥–Ω–∏–π'}</p>
                                </button>
                            );
                        })}
                    </div>
                </div>
            );
        }
        
        function Queues({ user, subjects }) {
            const [selected, setSelected] = useState(null);
            const qSubjects = subjects.filter(s => s.type === 'queue');
            
            if (selected) return <QueueDetail subject={selected} user={user} onBack={() => setSelected(null)} />;
            
            return (
                <div className="p-4">
                    <h1 className="text-2xl font-bold mb-4">–ß–µ—Ä–≥–∏</h1>
                    <div className="space-y-3">
                        {qSubjects.length > 0 ? qSubjects.map(s => (
                            <button key={s._id} onClick={() => setSelected(s)} className="w-full bg-white rounded-xl shadow-sm p-4 text-left">
                                <h3 className="font-bold">{s.name}</h3>
                                <p className="text-sm text-gray-500">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</p>
                            </button>
                        )) : <p className="text-gray-500">–ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö —á–µ—Ä–≥</p>}
                    </div>
                </div>
            );
        }
        
        function QueueDetail({ subject, user, onBack }) {
            const [queue, setQueue] = useState(null);
            const [labNum, setLabNum] = useState('');
            const [joining, setJoining] = useState(false);
            
            useEffect(() => {
                const load = () => {
                    fetch(`${API_BASE}/queues/subject/${subject._id}`)
                        .then(r => r.json())
                        .then(d => setQueue(d))
                        .catch(console.error);
                };
                load();
                const i = setInterval(load, 5000);
                return () => clearInterval(i);
            }, [subject]);
            
            const join = async (pos) => {
                if (!labNum && !pos) return alert('–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä –ª–∞–±–∏'); 
                // –Ø–∫—â–æ –Ω–∞—Ç–∏—Å–Ω—É–ª–∏ –Ω–∞ —Å–ª–æ—Ç (pos), —Ç–æ –Ω–æ–º–µ—Ä –ª–∞–±–∏ –∑–∞–ø–∏—Ç–∞—î–º–æ prompt-–æ–º –∞–±–æ —Ç—Ä–µ–±–∞ —Ñ–æ—Ä–º–∞
                
                let labToUse = labNum;
                if (!labToUse && pos) {
                     labToUse = prompt("–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó:");
                     if (!labToUse) return;
                }

                try {
                    await fetch(`${API_BASE}/queues/join`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            queueId: queue._id,
                            telegramId: user.id,
                            labNumber: parseInt(labToUse),
                            position: pos
                        })
                    });
                    setLabNum('');
                    setJoining(false);
                } catch(e) {
                    alert('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å—É');
                }
            };
            
            if (!queue) return <div className="p-4">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>;
            
            const MAX = queue.config?.maxSlots || 31;
            const myEntry = queue.entries?.find(e => e.user?.telegramId === user?.id);
            
            return (
                <div className="min-h-screen bg-gray-50 pb-20">
                    <div className="bg-white p-4 shadow-sm sticky top-0">
                        <button onClick={onBack} className="text-blue-600 mb-2">‚Üê –ù–∞–∑–∞–¥</button>
                        <h1 className="font-bold text-xl">{subject.name}</h1>
                        <p className={`text-sm ${queue.isActive ? 'text-green-600' : 'text-red-500'}`}>
                            {queue.isActive ? 'üü¢ –í—ñ–¥–∫—Ä–∏—Ç–æ' : 'üî¥ –ó–∞–∫—Ä–∏—Ç–æ'}
                        </p>
                    </div>
                    
                    <div className="p-4">
                        <div className="bg-white rounded-xl shadow-sm p-4 mb-20">
                            <h3 className="mb-4 font-bold">–ú—ñ—Å—Ü—è ({MAX})</h3>
                            <div className="grid grid-cols-3 gap-2">
                                {Array.from({length: MAX}, (_, i) => i + 1).map(n => {
                                    const e = queue.entries?.find(x => x.position === n);
                                    const isMine = e?.user?.telegramId === user?.id;
                                    return (
                                        <div
                                            key={n}
                                            onClick={() => !e && join(n)}
                                            className={`relative p-2 rounded-xl border-2 text-center min-h-28 flex flex-col items-center justify-center ${
                                                e ? 'bg-blue-50 border-blue-200' : 'border-dashed border-gray-300 cursor-pointer'
                                            } ${isMine ? 'ring-2 ring-blue-500' : ''}`}
                                        >
                                            <span className="absolute top-1 left-2 text-xs font-bold text-gray-400">#{n}</span>
                                            {e ? (
                                                <>
                                                    <div className="w-10 h-10 rounded-full bg-gray-200 mb-1 flex items-center justify-center font-bold overflow-hidden text-xs">
                                                        {e.user?.fullName?.slice(0, 2) || '?'}
                                                    </div>
                                                    <span className="text-xs font-bold break-words w-full">{e.user?.fullName || '–°—Ç—É–¥–µ–Ω—Ç'}</span>
                                                    <span className="text-xs bg-white px-2 py-0.5 rounded mt-1">–õ–∞–± {e.labNumber}</span>
                                                </>
                                            ) : (
                                                <div className="opacity-50">
                                                    <span className="text-blue-500 font-bold text-xl">+</span>
                                                    <p className="text-xs text-gray-400">–í—ñ–ª—å–Ω–æ</p>
                                                </div>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                    
                    <div className="fixed bottom-0 left-0 right-0 p-4 bg-white border-t">
                        {myEntry ? (
                            <div className="flex gap-2">
                                <div className="flex-1 bg-blue-50 p-3 rounded-xl flex items-center justify-between">
                                    <span className="text-xs font-bold text-blue-400">–ú–Ü–°–¶–ï</span>
                                    <span className="text-2xl font-black">{myEntry.position}</span>
                                </div>
                                <button onClick={async () => {
                                    if(confirm("–í–∏–π—Ç–∏ –∑ —á–µ—Ä–≥–∏?")) {
                                        await fetch(`${API_BASE}/queues/leave`, {
                                            method: 'POST',
                                            headers: {'Content-Type': 'application/json'},
                                            body: JSON.stringify({queueId: queue._id, telegramId: user.id})
                                        });
                                    }
                                }} className="px-6 bg-red-100 text-red-600 rounded-xl font-bold">–í–∏–π—Ç–∏</button>
                            </div>
                        ) : joining ? (
                            <div className="flex gap-2">
                                <input type="number" min="1" placeholder="‚Ññ –ª–∞–±–∏" className="w-24 p-3 bg-gray-100 rounded-xl text-center font-bold" value={labNum} onChange={e => setLabNum(e.target.value)} />
                                <button onClick={() => join()} className="flex-1 bg-green-600 text-white font-bold rounded-xl">–ó–∞–π–Ω—è—Ç–∏</button>
                                <button onClick={() => setJoining(false)} className="px-4 bg-gray-100 rounded-xl">‚úï</button>
                            </div>
                        ) : (
                            <button onClick={() => setJoining(true)} className="w-full bg-blue-600 text-white py-4 rounded-xl font-bold">–ó–∞–ø–∏—Å–∞—Ç–∏—Å—å</button>
                        )}
                    </div>
                </div>
            );
        }
        
        function Topics({ user, subjects }) {
            return (
                <div className="p-4">
                    <h1 className="text-2xl font-bold mb-4">–¢–µ–º–∏ —Ä–µ—Ñ–µ—Ä–∞—Ç—ñ–≤</h1>
                    <p className="text-gray-500">–í —Ä–æ–∑—Ä–æ–±—Ü—ñ...</p>
                </div>
            );
        }
        
        function Homework({ user }) {
            const [hw, setHw] = useState([]);
            const [newHw, setNewHw] = useState({ subject: '', description: '', deadline: '' });
            
            useEffect(() => {
                fetch(`${API_BASE}/homework`)
                    .then(r => r.json())
                    .then(d => setHw(d))
                    .catch(console.error);
            }, []);
            
            const add = async () => {
                if (!newHw.subject || !newHw.description) return alert('–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –ø–æ–ª—è');
                try {
                    await fetch(`${API_BASE}/homework`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(newHw)
                    });
                    setNewHw({ subject: '', description: '', deadline: '' });
                    const r = await fetch(`${API_BASE}/homework`);
                    setHw(await r.json());
                } catch(e) {
                    alert('–ü–æ–º–∏–ª–∫–∞');
                }
            };
            
            return (
                <div className="p-4">
                    <h1 className="text-2xl font-bold mb-4">–î–æ–º–∞—à–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</h1>
                    
                    <div className="bg-white rounded-xl shadow-sm p-4 mb-4">
                        <h2 className="font-bold mb-3">–î–æ–¥–∞—Ç–∏</h2>
                        <input type="text" placeholder="–ü—Ä–µ–¥–º–µ—Ç" className="w-full p-3 bg-gray-50 rounded-lg mb-2" value={newHw.subject} onChange={e => setNewHw({...newHw, subject: e.target.value})} />
                        <textarea placeholder="–û–ø–∏—Å" className="w-full p-3 bg-gray-50 rounded-lg mb-2" rows={3} value={newHw.description} onChange={e => setNewHw({...newHw, description: e.target.value})} />
                        <input type="date" className="w-full p-3 bg-gray-50 rounded-lg mb-3" value={newHw.deadline} onChange={e => setNewHw({...newHw, deadline: e.target.value})} />
                        <button onClick={add} className="w-full bg-blue-600 text-white py-3 rounded-lg font-bold">–î–æ–¥–∞—Ç–∏</button>
                    </div>
                    
                    <div className="space-y-3">
                        {hw.map(h => (
                            <div key={h._id} className="bg-white rounded-xl shadow-sm p-4">
                                <h3 className="font-bold">{h.subject}</h3>
                                <p className="text-sm text-gray-600 mt-1">{h.description}</p>
                                {h.deadline && <p className="text-xs text-blue-600 mt-2">–î–µ–¥–ª–∞–π–Ω: {h.deadline}</p>}
                            </div>
                        ))}
                    </div>
                </div>
            );
        }
        
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>